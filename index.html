<html>

<head>
    <meta charset="utf-8">
    <title>Directed Graph Editor</title>
    <link rel="stylesheet" href="main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
    <div style="position:absolute;left:0px;top:0px;width: 70%;height: 100%;" id="graphSVG" tabindex="0"></div>
    <div style="position:absolute;right:0px;top:0px;width: 30%;height: 100%;background-color: lightgray;overflow-y: scroll;" id="param" tabindex="1">
        <form action="" id="dynamic-table">
            <div style="width: 100%;height: 100px;margin-top: 70px;display: flex;flex-direction: column;align-items: center;">
                <label for="size">Taille de la matrice</label><br>
                <input type="text" placeholder="enter size" name="size" style="width: 100px;height: 50px;margin: 0px;padding: 0px;text-align: center;" maxlength="2">
            </div>
            <br>
            <div style="width: 100%;height: 50px;display: flex;flex-direction: column;align-items: center;">
                <button style="width: 100px;height: 50px;">Créer matrice</button>
            </div>
            <br>

        </form>
        <div id="table-wrapper" style="display: flex;justify-content: center;">
        </div>
        <div style="display: flex;justify-content: center;">
            <button id="generateButton" style="width: 100px;height: 50px;display:none;">Générer</button>
        </div>
</body>

<script src="d3.v3.min.js"></script>
<script src="main.js"></script>
<script>
    function isNumeric(str) {
        if (typeof str != "string") return false // we only process strings!  
        return !isNaN(str) && // use type coercion to parse the _entirety_ of the string (`parseFloat` alone does not do this)...
            !isNaN(parseFloat(str)) // ...and ensure strings of whitespace fail
    }
    $("#generateButton").hide();

    $("#generateButton").on('click', function(e) {
        // Créer matrice
        var tailleMatriceUtilisateur = $("#table-wrapper table tr").eq(1).children("td").length
        var laMatrice = []
        for (var i = 1; i < tailleMatriceUtilisateur + 1; i++) {
            var laLigne = []
            for (var j = 0; j < tailleMatriceUtilisateur; j++) {
                value = $('#' + i + "-" + j).val()
                laLigne.push(value)
            }
            laMatrice.push(laLigne)
        }
        //console.log("matrice")
        //console.log(laMatrice)
        newGraph = new Graph(laMatrice)
        newGraph.show();

        newGraph.createSVGfromGraph()
    });

    $("input[name='size']").on('input', function(e) {
        if ($("input[name='size']").val() > 26) {
            $(this).val("26");
        }
        $("input[name='size']").val($("input[name='size']").val().replace(/[^0-9]/g, ''));
    });
</script>
<!-- Script de création de la matrice dynamique -->
<script src="creationFormMatrice.js"></script>
<!-- Script class Graph et Node -->
<script src="Graph.js"></script>

</html>